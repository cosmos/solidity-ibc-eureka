syntax = "proto3";

package ibc_attestor;

// Request message for fetching attestations from a given height.
message AttestationsFromHeightRequest {
  // Block height to start from.
  uint64 height = 1;
}

// Entry pairing a block height with its corresponding attestation data and signature.
message AttestationEntry {
  // Block height of the attestation.
  uint64 height = 1;

  // Arbitrary data payload.
  bytes data = 2;

  // Signature over the data (64 bytes).
  bytes signature = 3;
}

// Response containing a common public key and a list of attestations in insertion order.
message AttestationsFromHeightResponse {
  // Compact compressed public key (64-bit) applicable to all attestations.
  bytes pubkey = 1;

  // Ordered list of height-attestation entries.
  repeated AttestationEntry attestations = 2;
}

// Service definition for retrieving attestations.
service AttestationService {
  // Retrieves all attestations from the specified block height onward, in insertion order.
  rpc GetAttestationsFromHeight(AttestationsFromHeightRequest)
    returns (AttestationsFromHeightResponse);
}
