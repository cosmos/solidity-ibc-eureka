// Code generated by https://github.com/gagliardetto/anchor-go.
// MANUALLY MODIFIED - See instructions.go for original auto-generated version.
//
// BUG FIX: anchor-go does not generate discriminator encoding for instructions with zero arguments.
// This causes "InstructionFallbackNotFound" (error 101) when calling these instructions.
// Related issue: https://github.com/gagliardetto/anchor-go/issues/53
//
// This file contains fixed versions of affected instructions with "Fixed" suffix:
// - NewInitializeInstructionFixed: Added Instruction_Initialize[:] discriminator
// - NewPauseAppInstructionFixed: Added Instruction_PauseApp[:] discriminator
// - NewUnpauseAppInstructionFixed: Added Instruction_UnpauseApp[:] discriminator
//
// Use these Fixed versions instead of the buggy ones from instructions.go.

package ics27_gmp

import (
	solanago "github.com/gagliardetto/solana-go"
)

// Builds a "initialize" instruction with discriminator fix.
// Initialize the ICS27 GMP application
func NewInitializeInstructionFixed(
	appStateAccount solanago.PublicKey,
	payerAccount solanago.PublicKey,
	authorityAccount solanago.PublicKey,
	systemProgramAccount solanago.PublicKey,
) (solanago.Instruction, error) {
	accounts__ := solanago.AccountMetaSlice{}

	// Add the accounts to the instruction.
	{
		// Account 0 "app_state": Writable, Non-signer, Required
		accounts__.Append(solanago.NewAccountMeta(appStateAccount, true, false))
		// Account 1 "payer": Writable, Signer, Required
		accounts__.Append(solanago.NewAccountMeta(payerAccount, true, true))
		// Account 2 "authority": Read-only, Signer, Required
		accounts__.Append(solanago.NewAccountMeta(authorityAccount, false, true))
		// Account 3 "system_program": Read-only, Non-signer, Required
		accounts__.Append(solanago.NewAccountMeta(systemProgramAccount, false, false))
	}

	// Create the instruction data with discriminator (MANUALLY ADDED - see file header).
	instructionData := Instruction_Initialize[:]

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		accounts__,
		instructionData,
	), nil
}

// Builds a "pause_app" instruction with discriminator fix.
// Pause the entire GMP app (admin only)
func NewPauseAppInstructionFixed(
	appStateAccount solanago.PublicKey,
	authorityAccount solanago.PublicKey,
) (solanago.Instruction, error) {
	accounts__ := solanago.AccountMetaSlice{}

	// Add the accounts to the instruction.
	{
		// Account 0 "app_state": Writable, Non-signer, Required
		// App state account - validated by Anchor PDA constraints
		accounts__.Append(solanago.NewAccountMeta(appStateAccount, true, false))
		// Account 1 "authority": Read-only, Signer, Required
		accounts__.Append(solanago.NewAccountMeta(authorityAccount, false, true))
	}

	// Create the instruction data with discriminator (MANUALLY ADDED - see file header).
	instructionData := Instruction_PauseApp[:]

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		accounts__,
		instructionData,
	), nil
}

// Builds a "unpause_app" instruction with discriminator fix.
// Unpause the entire GMP app (admin only)
func NewUnpauseAppInstructionFixed(
	appStateAccount solanago.PublicKey,
	authorityAccount solanago.PublicKey,
) (solanago.Instruction, error) {
	accounts__ := solanago.AccountMetaSlice{}

	// Add the accounts to the instruction.
	{
		// Account 0 "app_state": Writable, Non-signer, Required
		// App state account - validated by Anchor PDA constraints
		accounts__.Append(solanago.NewAccountMeta(appStateAccount, true, false))
		// Account 1 "authority": Read-only, Signer, Required
		accounts__.Append(solanago.NewAccountMeta(authorityAccount, false, true))
	}

	// Create the instruction data with discriminator (MANUALLY ADDED - see file header).
	instructionData := Instruction_UnpauseApp[:]

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		accounts__,
		instructionData,
	), nil
}
